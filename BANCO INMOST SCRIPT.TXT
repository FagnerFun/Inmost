CREATE DATABASE INMOSTDESEN

USE INMOSTDESEN

CREATE TABLE LOGIN (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  EMAIL VARCHAR(255) UNIQUE NOT NULL,
  SENHA VARCHAR (100) NOT NULL,
  CONSELHEIRO INTEGER NOT NULL,
  CONVIDADO INTEGER NOT NULL,
  MEMBRO INTEGER NOT NULL,
  _NOVO INTEGER NOT NULL
  
);

CREATE TABLE USR (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  NOME VARCHAR(255) NULL,
  APELIDO VARCHAR(255) NULL,
  SEXO VARCHAR(30) NULL,
  PREF_SEX VARCHAR(30) NULL,
  DDD VARCHAR(5) NULL,
  TELEFONE VARCHAR(20)  NULL,
  DESCRICAO VARCHAR(1000) NULL,
  DATA_NASC DATETIME NULL,
  URL_IMG VARCHAR(500) NULL,
  _ID_LOGIN INTEGER NOT NULL,
  
  CONSTRAINT FK_ID_LOGIN FOREIGN KEY (_ID_LOGIN) REFERENCES LOGIN(_ID)

);

CREATE TABLE APROVAR (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  _USR_CONSELHEIRO INTEGER NULL,
  _USR_CONVIDADO INTEGER NULL,
  DESCRICAO VARCHAR(255) NULL

  CONSTRAINT FK_USR_CONSELHEIRO FOREIGN KEY(_USR_CONSELHEIRO) REFERENCES USR(_ID),
  CONSTRAINT FK_USR_CONVIDADO FOREIGN KEY (_USR_CONVIDADO) REFERENCES USR(_ID)
);

CREATE TABLE CONVITE (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  _USR_MEMBRO INTEGER NOT NULL,
  EMAIL VARCHAR(255) UNIQUE NOT NULL

  CONSTRAINT FK_USR_MEMBRO FOREIGN KEY (_USR_MEMBRO) REFERENCES USR(_ID)
);

CREATE TABLE TIPO (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  DESCRICAO VARCHAR(100)  NULL,
  NEGACAO INTEGER NULL

);

CREATE TABLE CURTIDA (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  _USR_RECEPTOR INTEGER NOT NULL,
  _USR_EMISSOR INTEGER NOT NULL,
  _ID_TIPO INTEGER NOT NULL,
  _ID_TIPO_REPLICA INTEGER NOT NULL
  
  CONSTRAINT FK_USR_RECEPTOR FOREIGN KEY (_USR_RECEPTOR) REFERENCES USR(_ID),
  CONSTRAINT FK_USR_EMISSOR FOREIGN KEY (_USR_EMISSOR) REFERENCES USR(_ID),
  CONSTRAINT FK_ID_TIPO FOREIGN KEY (_ID_TIPO) REFERENCES TIPO(_ID),
  CONSTRAINT FK_ID_TIPO_REPLICA FOREIGN KEY (_ID_TIPO_REPLICA) REFERENCES TIPO(_ID)
);

CREATE TABLE CURTIDA_TIPO (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  _ID_TIPO INTEGER NOT NULL,
  _ID_CURTIDA INTEGER NOT NULL

  CONSTRAINT FK_ID_TIPO_CURTIDA FOREIGN KEY (_ID_TIPO) REFERENCES TIPO(_ID),
  CONSTRAINT FK_CURTIDA FOREIGN KEY (_ID_CURTIDA) REFERENCES CURTIDA(_ID)

);

CREATE TABLE FOTO (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  _USR_MEMBRO INTEGER NOT NULL,
  URL VARCHAR(500) NOT NULL

  CONSTRAINT FK_USR_MEMBRO_FOTO FOREIGN KEY (_USR_MEMBRO) REFERENCES USR(_ID)

);


CREATE TABLE TECNOLOGIA (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  NOM VARCHAR(255) NOT NULL,
  DSC VARCHAR(255) NOT NULL
);

CREATE TABLE REJEICAO (
  _ID INTEGER IDENTITY(1,1) PRIMARY KEY NOT NULL ,
  _INS DATETIME  NULL,
  _UPD DATETIME NULL,
  _USR VARCHAR(30)  NULL,
  _ATV INTEGER  NULL,
  _USR_REJEITADO INTEGER NOT NULL,
  _USR_REJEITA INTEGER NOT NULL
  
  CONSTRAINT FK_USR_REJEITADO FOREIGN KEY (_USR_REJEITADO) REFERENCES USR(_ID),
  CONSTRAINT FK_USR_REJEITA FOREIGN KEY (_USR_REJEITA) REFERENCES USR(_ID)
);




